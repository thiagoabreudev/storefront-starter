{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-search/src/components/scss/EcSearch.scss?9642","webpack:///./node_modules/@ecomplus/widget-search/src/components/scss/EcSearch.scss?51b4","webpack:///./node_modules/@ecomplus/widget-search/src/components/scss/EcSearch.scss","webpack:///./node_modules/@ecomplus/widget-search/src/lib/dictionary.js","webpack:///./node_modules/@ecomplus/widget-search/src/components/js/EcSearch.js?018c","webpack:///./node_modules/@ecomplus/widget-search/src/components/js/EcSearch.js","webpack:///./node_modules/@ecomplus/widget-search/src/components/EcSearch.vue","webpack:///./node_modules/@ecomplus/widget-search/src/components/html/EcSearch.html","webpack:///./node_modules/@ecomplus/widget-search/src/index.js"],"names":["content","module","i","locals","exports","add","default","___CSS_LOADER_API_IMPORT___","push","dictionary","did_you_mean","en_us","pt_br","no_results_for","total_results_for","see_all","name","components","EcProductCard","props","lang","type","String","_config","get","storeId","Number","term","maxItems","autoFixScore","Boolean","popoverPlacement","data","ecomSearch","EcomSearch","this","searchTerm","searchedTerm","searching","suggestedItems","suggestedTerm","totalSearchResults","elInput","showPopover","computed","history","filter","length","indexOf","slice","methods","word","setSearchTerm","value","$form","$el","parentElement","tagName","submit","checkCurrentTerm","handleSuggestions","suggestTerm","autoFix","getTermSuggestions","forEach","options","text","opt","score","replace","shift","fetchItems","reset","setPageSize","fetch","then","getItems","getTotalCount","catch","err","console","error","finally","instantSearch","setTimeout","created","onScrollTimer","lastScrollOffset","window","pageYOffset","addEventListener","clearTimeout","Math","abs","document","activeElement","blur","mounted","$input","childNodes","ev","setAttribute","watch","_vm","_h","$createElement","_c","_self","staticClass","_t","attrs","id","on","$event","_v","_e","_s","domProps","preventDefault","_l","product","key","_id","elId","$searchInput","getElementById","attributes","Vue","render","h","EcSearch","scopedSlots","input","$mount"],"mappings":"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","file":"f15540b6f75e383d3825.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcSearch.scss?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5af98a6a\", content, true, {});","import mod from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcSearch.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcSearch.scss?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ec-search__popover{max-width:calc(100vw - 2rem);max-height:calc(100vh - 200px);margin-top:10px;overflow-y:auto;box-shadow:0 0 .75rem rgba(0,0,0,.075)}@media (min-width:576px){.ec-search__popover{min-width:400px}}@media (min-width:850px){.ec-search__popover{max-height:calc(100vh - 100px)}}@media (min-width:1200px){.ec-search__popover{max-width:1100px;min-width:800px}}.ec-search__head{display:flex;justify-content:space-between;align-items:flex-start}.ec-search__close{padding:0 .25rem}.ec-search__close:focus{box-shadow:none}.ec-search__history,.ec-search__info{font-weight:300;margin-bottom:.25rem;font-size:1.15rem;overflow-x:auto;white-space:nowrap;color:var(--gray)}.ec-search__info em{color:var(--secondary);margin-right:.5rem}.ec-search__info span{display:inline-block}.ec-search__history__link{margin-left:.5rem}.ec-search__items{display:flex;overflow-x:auto}@media (min-width:992px){.ec-search__items{margin-top:1rem;width:850px}}.ec-search__item{padding-right:1rem}.ec-search__item:last-child{padding-right:0}@media (max-width:849.98px){.ec-search__item{width:200px;flex:0 0 200px}}@media (min-width:850px){.ec-search__item{width:25%}}.ec-search__item .btn,.ec-search__item button{display:none}.ec-search__item .ec-prices{height:auto;white-space:normal}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","const dictionary = {\n  did_you_mean: {\n    en_us: 'Did you mean',\n    pt_br: 'VocÃª quis dizer'\n  },\n  no_results_for: {\n    en_us: 'No results for',\n    pt_br: 'Nenhum produto encontrado para'\n  },\n  total_results_for: {\n    en_us: 'products found for',\n    pt_br: 'produtos encontrados para'\n  },\n  see_all: {\n    en_us: 'See all',\n    pt_br: 'Ver todos'\n  }\n}\n\nexport default function (word, lang) {\n  if (!lang) {\n    lang = (this && this.lang) || 'en_us'\n  }\n  return (dictionary[word] && dictionary[word][lang]) || ''\n}\n","import mod from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcSearch.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcSearch.js?vue&type=script&lang=js&\"","import { _config } from '@ecomplus/utils'\nimport EcomSearch from '@ecomplus/search-engine'\nimport dictionary from './../../lib/dictionary'\nimport EcProductCard from '@ecomplus/widget-product-card/src/components/EcProductCard.vue'\n\nexport default {\n  name: 'EcSearch',\n\n  components: {\n    EcProductCard\n  },\n\n  props: {\n    lang: {\n      type: String,\n      default: _config.get('lang')\n    },\n    storeId: {\n      type: Number,\n      default: _config.get('store_id')\n    },\n    term: {\n      type: String,\n      default: ''\n    },\n    maxItems: {\n      type: Number,\n      default: 4\n    },\n    autoFixScore: {\n      type: [Number, Boolean],\n      default: 0.83\n    },\n    popoverPlacement: {\n      type: String,\n      default: 'bottom'\n    }\n  },\n\n  data () {\n    return {\n      ecomSearch: new EcomSearch(this.storeId),\n      searchTerm: this.term,\n      searchedTerm: null,\n      searching: false,\n      suggestedItems: [],\n      suggestedTerm: '',\n      totalSearchResults: 0,\n      elInput: null,\n      showPopover: false\n    }\n  },\n\n  computed: {\n    history () {\n      return this.ecomSearch.history\n        .filter(term => term.length > 2 && this.searchTerm.indexOf(term) === -1)\n        .slice(0, 5)\n    }\n  },\n\n  methods: {\n    dictionary,\n\n    setSearchTerm (term) {\n      this.elInput.value = term\n      const $form = this.$el.parentElement\n      if ($form && $form.tagName === 'FORM') {\n        $form.submit()\n      } else {\n        this.searchTerm = term\n      }\n    },\n\n    checkCurrentTerm (term) {\n      return (!term && !this.elInput.value) || this.elInput.value === term\n    },\n\n    handleSuggestions (term) {\n      let suggestTerm = term\n      let autoFix = false\n      this.suggestedTerm = ''\n      this.ecomSearch.getTermSuggestions().forEach(({ options, text }) => {\n        if (options.length) {\n          const opt = options[0]\n          if (\n            !this.totalSearchResults &&\n            this.autoFixScore > 0 &&\n            opt.score >= this.autoFixScore &&\n            opt.text.indexOf(term) === -1\n          ) {\n            autoFix = true\n          }\n          suggestTerm = suggestTerm.replace(text, opt.text)\n        }\n      })\n      if (suggestTerm !== term) {\n        if (autoFix) {\n          this.elInput.value = this.searchTerm = suggestTerm\n        } else {\n          this.suggestedTerm = suggestTerm\n        }\n        this.ecomSearch.history.shift()\n      }\n    },\n\n    fetchItems (term) {\n      const { ecomSearch } = this\n      if (term !== false) {\n        if (!term) {\n          term = this.searchTerm\n        }\n        ecomSearch.setSearchTerm(term)\n      } else {\n        ecomSearch.reset().setPageSize(this.maxItems)\n      }\n      this.searching = true\n      ecomSearch.fetch()\n        .then(() => {\n          if (this.checkCurrentTerm(term)) {\n            const { getItems, getTotalCount } = ecomSearch\n            this.searchedTerm = term\n            this.suggestedItems = getItems()\n            this.totalSearchResults = getTotalCount()\n            this.handleSuggestions(term)\n          }\n        })\n        .catch(err => {\n          console.error(err)\n        })\n        .finally(() => {\n          this.searching = false\n        })\n    },\n\n    instantSearch (term) {\n      if (this.searchedTerm === null) {\n        this.fetchItems(term)\n      } else if (this.searchedTerm !== term) {\n        this.showPopover = false\n        setTimeout(() => {\n          if (this.checkCurrentTerm(term)) {\n            this.fetchItems(term)\n          }\n          setTimeout(() => {\n            if (this.checkCurrentTerm(term)) {\n              this.showPopover = true\n            }\n          }, 100)\n        }, 400)\n      }\n    }\n  },\n\n  created () {\n    let onScrollTimer\n    let lastScrollOffset = window.pageYOffset\n    window.addEventListener('scroll', () => {\n      clearTimeout(onScrollTimer)\n      onScrollTimer = setTimeout(() => {\n        if (Math.abs(window.pageYOffset - lastScrollOffset) > 50) {\n          if (this.elInput === document.activeElement) {\n            this.elInput.blur()\n          }\n        }\n        lastScrollOffset = window.pageYOffset\n      }, 50)\n    })\n    this.ecomSearch.setPageSize(this.maxItems)\n  },\n\n  mounted () {\n    let $input\n    for (let i = 0; i < this.$el.childNodes.length; i++) {\n      if (this.$el.childNodes[0].tagName === 'INPUT') {\n        $input = this.$el.childNodes[0]\n        break\n      }\n    }\n    if ($input) {\n      $input.addEventListener('keyup', ev => {\n        this.searchTerm = $input.value\n        if (!this.showPopover) {\n          this.showPopover = true\n        }\n      })\n      $input.addEventListener('focus', ev => {\n        if (!this.totalSearchResults) {\n          this.instantSearch(false)\n        }\n      })\n      if (!this.term) {\n        this.searchTerm = $input.value\n      } else {\n        this.fetchItems()\n      }\n      $input.setAttribute('autocomplete', 'off')\n      this.elInput = $input\n    } else {\n      this.fetchItems()\n    }\n  },\n\n  watch: {\n    searchTerm (term) {\n      if (term) {\n        if (term.length > 2) {\n          this.instantSearch(term)\n        }\n      } else {\n        this.instantSearch(false)\n      }\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./html/EcSearch.html?vue&type=template&id=18a0ec2d&lang=html&\"\nimport script from \"./js/EcSearch.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcSearch.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcSearch.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ec-search\"},[_vm._t(\"input\",[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"search\"}})]),(_vm.elInput)?[_c('b-popover',{attrs:{\"triggers\":\"focus\",\"custom-class\":'ec-search__popover',\"target\":_vm.elInput.id,\"show\":_vm.showPopover,\"placement\":_vm.popoverPlacement,\"fallback-placement\":[_vm.popoverPlacement]},on:{\"update:show\":function($event){_vm.showPopover=$event}}},[_c('div',{staticClass:\"ec-search__head\"},[_c('div',[(_vm.searching)?_c('div',{staticClass:\"spinner-border m-4\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])]):_vm._e(),_c('transition',{attrs:{\"enter-active-class\":\"animated fadeIn\"}},[(!_vm.searching && _vm.searchedTerm)?_c('div',{staticClass:\"ec-search__info\"},[(_vm.suggestedTerm)?[_vm._v(\" \"+_vm._s(_vm.dictionary('did_you_mean'))+\" \"),_c('a',{staticClass:\"ec-search__suggestion\",attrs:{\"href\":\"#\"},domProps:{\"textContent\":_vm._s(_vm.suggestedTerm)},on:{\"click\":function($event){$event.preventDefault();return _vm.setSearchTerm(_vm.suggestedTerm)}}}),_vm._v(\" ? \")]:_vm._e(),(!_vm.totalSearchResults)?_c('span',{staticClass:\"ec-search__no-results\"},[_vm._v(\" \"+_vm._s(_vm.dictionary('no_results_for'))+\" \"),_c('em',[_vm._v(_vm._s(_vm.searchedTerm))])]):_c('span',{staticClass:\"ec-search__count-results\"},[_c('strong',[_vm._v(_vm._s(_vm.totalSearchResults))]),_vm._v(\" \"+_vm._s(_vm.dictionary('total_results_for'))+\" \"),_c('em',[_vm._v(_vm._s(_vm.searchedTerm))]),(_vm.totalSearchResults > _vm.maxItems)?_c('a',{attrs:{\"href\":\"#\"},domProps:{\"textContent\":_vm._s((\"+\" + (_vm.dictionary('see_all'))))},on:{\"click\":function($event){$event.preventDefault();return _vm.setSearchTerm(_vm.searchedTerm)}}}):_vm._e()])],2):_vm._e()]),_c('transition',{attrs:{\"enter-active-class\":\"animated fadeInLeft\"}},[(_vm.history.length)?_c('div',{staticClass:\"ec-search__history\"},[_c('i',{staticClass:\"fas fa-history\"}),_vm._l((_vm.history),function(term){return _c('a',{staticClass:\"ec-search__history__link\",attrs:{\"href\":\"#\"},domProps:{\"textContent\":_vm._s(term)},on:{\"click\":function($event){$event.preventDefault();return _vm.setSearchTerm(term)}}})})],2):_vm._e()])],1),_c('button',{staticClass:\"btn ec-search__close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showPopover = false}}},[_c('i',{staticClass:\"fas fa-times\"})])]),_c('transition',{attrs:{\"enter-active-class\":\"animated fadeIn slow\"}},[(!_vm.searching && _vm.suggestedItems.length)?_c('div',{staticClass:\"ec-search__items\"},_vm._l((_vm.suggestedItems),function(product){return _c('ec-product-card',{key:product._id,staticClass:\"ec-search__item\",attrs:{\"lang\":_vm.lang,\"storeId\":_vm.storeId,\"product\":product}})}),1):_vm._e()])],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * @ecomplus/widget-search\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport Vue from 'vue'\nimport '@ecomplus/storefront-twbs'\nimport EcSearch from './components/EcSearch.vue'\n\nexport default (options = {}, elId = 'search-input') => {\n  const $searchInput = document.getElementById(elId)\n\n  if ($searchInput) {\n    const attrs = {}\n    for (let i = $searchInput.attributes.length - 1; i >= 0; i--) {\n      const { name, value } = $searchInput.attributes[i]\n      attrs[name] = value\n    }\n\n    new Vue({\n      render: h => h(EcSearch, {\n        props: options.props,\n        scopedSlots: {\n          input: () => h('input', { attrs })\n        }\n      })\n    }).$mount($searchInput)\n  }\n}\n"],"sourceRoot":""}