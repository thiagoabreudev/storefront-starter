{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-user/src/components/scss/EcUser.scss?9293","webpack:///./node_modules/@ecomplus/widget-user/src/components/scss/EcUser.scss?0c9d","webpack:///./node_modules/@ecomplus/widget-user/src/components/scss/EcUser.scss","webpack:///./node_modules/@ecomplus/widget-user/src/lib/dictionary.js","webpack:///./node_modules/@ecomplus/widget-user/src/components/js/EcUser.js?7012","webpack:///./node_modules/@ecomplus/widget-user/src/components/js/EcUser.js","webpack:///./node_modules/@ecomplus/widget-user/src/components/EcUser.vue","webpack:///./node_modules/@ecomplus/widget-user/src/components/html/EcUser.html","webpack:///./node_modules/@ecomplus/widget-user/src/index.js"],"names":["content","module","i","locals","exports","add","default","___CSS_LOADER_API_IMPORT___","push","dictionary","my_account","en_us","pt_br","my_orders","hello","visitor","sign_in_with","sign_up_with","another","email","logout","login","continue_on_popup","login_error","profile_not_found","visitor_checkout","word","lang","this","name","props","type","String","$ecomConfig","get","ecomPassport","Object","popoverPlacement","getGreetingsMsg","Function","accountUrl","ordersUrl","popupAlertCountSecs","Number","data","showPopover","popoverTriggers","waiting","waitingPopup","isLogged","oauthProviders","showLoginForm","popupAlertCount","loginErrorAlert","noProfileFound","popoverHideTimer","computed","greetings","methods","update","fixPopoverTriggers","checkLogin","getCustomerName","setTimeout","clearTimeout","waitPromise","promise","vm","catch","err","console","error","finally","setOauthProviders","fetchOauthProviders","then","host","baseUri","oauthPath","providers","provider","faIcon","providerName","link","presetOauthProviders","oauthPopup","popupOauthLink","find","oauthProvider","popupAlertChanged","countDown","emailLoginSubmit","e","preventDefault","fetchLogin","response","status","resetErrors","resetPopover","mounted","forEach","ev","on","payload","$emit","watch","newStatus","$refs","input","focus","_vm","_h","$createElement","_c","_self","staticClass","_t","directives","rawName","modifiers","attrs","$event","slot","_v","_s","key","value","expression","ref","domProps","target","composing","_l","class","options","elId","$userButton","document","getElementById","Vue","render","h","EcUser","id","$mount"],"mappings":"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","file":"482165463d3b9aa979a8.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcUser.scss?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3709a56d\", content, true, {});","import mod from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcUser.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcUser.scss?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ec-user{display:inline}.ec-user__popover{max-width:100%;min-width:12rem;font-size:1rem;line-height:1.4}.ec-user__alert{font-size:.85rem;margin-bottom:1rem}.ec-user__logout{margin-top:1rem}.ec-user__btn{color:#fff;text-align:left;line-height:1.2rem;padding:.7rem;min-width:15rem;font-size:.9rem}.ec-user__btn:hover{color:#fff}.ec-user__btn:focus{box-shadow:none}.ec-user__btn--facebook{background:#3b5999;border-color:#2f4d8a}.ec-user__btn--facebook:hover{background:#274480;border-color:#274480}.ec-user__btn--google{background:#cb4023;border-color:#be3419}.ec-user__btn--google:hover{background:#c1361a;border-color:#c1361a}.ec-user__btn--windowslive{background:#329ffc;border-color:#2996f2}.ec-user__btn--windowslive:hover{background:#1f8ce9;border-color:#1f8ce9}.ec-user__btn__icon{display:inline-block;width:1.4rem;text-align:center;margin-right:.2rem}.ec-user__back{display:block;padding-left:.3rem;padding-right:.3rem}.ec-user__back:focus{box-shadow:none}.ec-user__visitor-info{font-size:.875rem;margin-top:.6rem;text-align:center;color:var(--gray)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","const dictionary = {\n  my_account: {\n    en_us: 'My account',\n    pt_br: 'Minha conta'\n  },\n  my_orders: {\n    en_us: 'My orders',\n    pt_br: 'Meus pedidos'\n  },\n  hello: {\n    en_us: 'Hello',\n    pt_br: 'Olá'\n  },\n  visitor: {\n    en_us: 'visitor',\n    pt_br: 'visitante'\n  },\n  sign_in_with: {\n    en_us: 'Sign in with',\n    pt_br: 'Entrar com'\n  },\n  sign_up_with: {\n    en_us: 'Sign up with',\n    pt_br: 'Cadastrar via'\n  },\n  another: {\n    en_us: 'another',\n    pt_br: 'outro'\n  },\n  email: {\n    en_us: 'email',\n    pt_br: 'e-mail'\n  },\n  logout: {\n    en_us: 'Logout',\n    pt_br: 'Sair'\n  },\n  login: {\n    en_us: 'Login',\n    pt_br: 'Entrar'\n  },\n  continue_on_popup: {\n    en_us: 'Continue login on popup',\n    pt_br: 'Continue o login no pop-up'\n  },\n  login_error: {\n    en_us: 'There was an error trying to login, please try again or select another option',\n    pt_br: 'Houve um erro ao tentar o login, por favor tente novamente ou selecione outra opção'\n  },\n  profile_not_found: {\n    en_us: 'No profile found with email address',\n    pt_br: 'Nenhum perfil encontrado com o endereço de e-mail'\n  },\n  visitor_checkout: {\n    en_us: 'You can also buy as a visitor if you prefer',\n    pt_br: 'Você também pode comprar como visitante se preferir'\n  }\n}\n\nexport default function (word, lang) {\n  if (!lang) {\n    lang = (this && this.lang) || 'en_us'\n  }\n  return (dictionary[word] && dictionary[word][lang]) || ''\n}\n","import mod from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcUser.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcUser.js?vue&type=script&lang=js&\"","import { $ecomConfig } from '@ecomplus/utils'\nimport dictionary from './../../lib/dictionary'\nimport ecomPassport from '@ecomplus/passport-client'\n\nexport default {\n  name: 'EcUser',\n\n  props: {\n    lang: {\n      type: String,\n      default: $ecomConfig.get('lang')\n    },\n    ecomPassport: {\n      type: Object,\n      default: () => ecomPassport\n    },\n    popoverPlacement: {\n      type: String,\n      default: 'bottomleft'\n    },\n    getGreetingsMsg: {\n      type: Function\n    },\n    accountUrl: {\n      type: String,\n      default: '/app/#/account/'\n    },\n    ordersUrl: {\n      type: String,\n      default: '/app/#/account/orders'\n    },\n    popupAlertCountSecs: {\n      type: Number,\n      default: 3\n    }\n  },\n\n  data () {\n    return {\n      showPopover: false,\n      popoverTriggers: 'click blur',\n      waiting: false,\n      waitingPopup: false,\n      isLogged: false,\n      email: '',\n      name: '',\n      oauthProviders: [],\n      showLoginForm: false,\n      popupAlertCount: 0,\n      loginErrorAlert: false,\n      noProfileFound: false,\n      popoverHideTimer: null\n    }\n  },\n\n  computed: {\n    greetings () {\n      if (typeof this.getGreetingsMsg === 'function') {\n        return this.getGreetingsMsg(this.name)\n      } else {\n        return `${dictionary('hello', this.lang)} ${this.name || dictionary('visitor', this.lang)}`\n      }\n    }\n  },\n\n  methods: {\n    dictionary,\n\n    update () {\n      this.fixPopoverTriggers()\n      const { checkLogin, getCustomerName } = this.ecomPassport\n      this.name = getCustomerName()\n      this.isLogged = checkLogin()\n      this.email = ''\n      this.popupAlertCount = 0\n      if (this.isLogged) {\n        this.showPopover = true\n        setTimeout(() => {\n          if (this.showPopover) {\n            this.popoverHideTimer = setTimeout(() => {\n              this.showPopover = false\n            }, 2000)\n          }\n        }, 200)\n      }\n      this.waitingPopup = false\n      clearTimeout(this.popoverHideTimer)\n    },\n\n    waitPromise (promise) {\n      this.fixPopoverTriggers()\n      const vm = this\n      vm.waiting = true\n      promise\n        .catch(err => {\n          console.error(err)\n        })\n        .finally(() => {\n          vm.waiting = false\n        })\n    },\n\n    setOauthProviders () {\n      const vm = this\n      const promise = vm.ecomPassport.fetchOauthProviders()\n        .then(({ host, baseUri, oauthPath, providers }) => {\n          const oauthProviders = []\n          for (const provider in providers) {\n            if (providers[provider]) {\n              const { faIcon, providerName } = providers[provider]\n              oauthProviders.push({\n                link: host + baseUri + provider + oauthPath,\n                faIcon,\n                provider,\n                providerName\n              })\n            }\n          }\n          vm.oauthProviders = oauthProviders\n        })\n        .catch(err => {\n          vm.presetOauthProviders()\n          throw err\n        })\n      vm.waitPromise(promise)\n      return promise\n    },\n\n    presetOauthProviders () {\n      this.oauthProviders = [\n        {\n          faIcon: 'fa-facebook-f',\n          providerName: 'Facebook',\n          provider: 'facebook'\n        },\n        {\n          faIcon: 'fa-google',\n          providerName: 'Google',\n          provider: 'google'\n        },\n        {\n          faIcon: 'fa-windows',\n          providerName: 'Windows',\n          provider: 'windowslive'\n        }\n      ]\n    },\n\n    oauthPopup (link, provider) {\n      const vm = this\n      this.loginErrorAlert = false\n      if (link) {\n        vm.ecomPassport.popupOauthLink(link)\n        vm.waitingPopup = true\n        setTimeout(() => {\n          vm.popupAlertCount = vm.popupAlertCountSecs\n        }, 200)\n      } else {\n        const promise = vm.setOauthProviders()\n          .then(() => {\n            const link = vm.oauthProviders\n              .find(oauthProvider => oauthProvider.provider === provider)\n            vm.oauthPopup(link, provider)\n          })\n          .catch(err => {\n            vm.loginErrorAlert = true\n            throw err\n          })\n        vm.waitPromise(promise)\n      }\n    },\n\n    popupAlertChanged (countDown) {\n      this.popupAlertCount = countDown\n    },\n\n    emailLoginSubmit (e) {\n      const vm = this\n      e.preventDefault()\n      vm.showLoginForm = false\n      const promise = vm.ecomPassport.fetchLogin(this.email)\n        .catch(err => {\n          const { response } = err\n          if (response && response.status === 403) {\n            vm.noProfileFound = true\n          } else {\n            setTimeout(() => {\n              vm.loginErrorAlert = true\n            }, 100)\n            throw err\n          }\n        })\n      vm.waitPromise(promise)\n    },\n\n    logout () {\n      this.ecomPassport.logout()\n    },\n\n    resetErrors () {\n      this.noProfileFound = this.loginErrorAlert = false\n    },\n\n    resetPopover () {\n      if (this.showLoginForm) {\n        this.showLoginForm = false\n      } else {\n        this.resetErrors()\n      }\n    },\n\n    fixPopoverTriggers () {\n      if (this.showPopover) {\n        this.popoverTriggers = 'manual'\n        setTimeout(() => {\n          this.popoverTriggers = 'click blur'\n        }, 310)\n      }\n    }\n  },\n\n  mounted () {\n    const vm = this\n    ;['login', 'logout'].forEach(ev => {\n      this.ecomPassport.on(ev, payload => {\n        vm.update()\n        vm.$emit(ev, payload)\n      })\n    })\n    vm.update()\n    vm.setOauthProviders()\n  },\n\n  watch: {\n    noProfileFound (newStatus) {\n      if (newStatus === false) {\n        this.email = ''\n      }\n      this.showLoginForm = !newStatus\n    },\n\n    showLoginForm (newStatus) {\n      this.loginErrorAlert = false\n      if (newStatus) {\n        this.fixPopoverTriggers()\n        setTimeout(() => {\n          if (this.$refs.input) {\n            this.$refs.input.focus()\n          }\n        }, 300)\n      }\n    },\n\n    showPopover () {\n      clearTimeout(this.popoverHideTimer)\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./html/EcUser.html?vue&type=template&id=ac2e5f94&lang=html&\"\nimport script from \"./js/EcUser.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcUser.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcUser.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ec-user\"},[_vm._t(\"button\",[_c('button',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.left\",modifiers:{\"hover\":true,\"left\":true}}],staticClass:\"btn btn-lg btn-light\",attrs:{\"type\":\"button\",\"id\":\"ec-user-popover\",\"title\":_vm.dictionary('my_account')}},[_c('i',{staticClass:\"fas fa-user\"})])]),_c('b-popover',{attrs:{\"target\":\"ec-user-popover\",\"triggers\":_vm.popoverTriggers,\"show\":_vm.showPopover,\"placement\":_vm.popoverPlacement},on:{\"update:show\":function($event){_vm.showPopover=$event},\"hidden\":_vm.resetPopover}},[_c('template',{slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.greetings)+\" \")]),_c('div',{staticClass:\"ec-user__popover\"},[_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":_vm.loginErrorAlert,\"fade\":\"\",\"variant\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('login_error'))+\". \")]),_c('transition-group',{attrs:{\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated position-absolute fadeOut faster\"}},[(_vm.waiting)?_c('div',{key:\"waiting\"},[_c('div',{staticClass:\"spinner-border m-3\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])]):(_vm.isLogged)?_c('div',{key:\"logged\"},[_c('div',{staticClass:\"list-group list-group-flush\"},[_c('a',{staticClass:\"list-group-item list-group-item-action\",attrs:{\"href\":_vm.ordersUrl}},[_vm._v(\" \"+_vm._s(_vm.dictionary('my_orders'))+\" \")]),_c('a',{staticClass:\"list-group-item list-group-item-action\",attrs:{\"href\":_vm.accountUrl}},[_vm._v(\" \"+_vm._s(_vm.dictionary('my_account'))+\" \")])]),_c('button',{staticClass:\"btn btn-block btn-danger ec-user__logout\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.logout}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" \"+_vm._s(_vm.dictionary('logout'))+\" \")])]):(!_vm.showLoginForm)?_c('div',{key:\"oauth\"},[_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":!_vm.popupAlertCount && _vm.noProfileFound,\"fade\":\"\",\"variant\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('profile_not_found'))+\" \"),_c('b',[_vm._v(_vm._s(_vm.email))]),_vm._v(\". \"),_c('br'),_c('a',{staticClass:\"alert-link\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.noProfileFound = false}}},[_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('another')) + \" \" + (_vm.dictionary('email'))))+\" \")])]),_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":_vm.popupAlertCount,\"dismissible\":\"\",\"fade\":\"\",\"variant\":\"info\"},on:{\"dismissed\":function($event){_vm.popupAlertCount = 0},\"dismiss-count-down\":_vm.popupAlertChanged}},[_vm._v(\" \"+_vm._s(_vm.dictionary('continue_on_popup'))+\". \")]),_vm._l((_vm.oauthProviders),function(ref){\nvar link = ref.link;\nvar faIcon = ref.faIcon;\nvar providerName = ref.providerName;\nvar provider = ref.provider;\nreturn _c('button',{key:provider,staticClass:\"btn btn-block ec-user__btn\",class:(\"ec-user__btn--\" + provider),attrs:{\"type\":\"button\"},on:{\"click\":function () { return _vm.oauthPopup(link, provider); }}},[_c('span',{staticClass:\"ec-user__btn__icon\"},[_c('i',{staticClass:\"fab\",class:faIcon})]),_vm._v(\" \"+_vm._s(_vm.dictionary(_vm.noProfileFound ? 'sign_up_with' : 'sign_in_with'))+\" \"+_vm._s(providerName)+\" \")])}),(!_vm.noProfileFound)?_c('button',{key:\"email\",staticClass:\"btn btn-block btn-secondary ec-user__btn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showLoginForm = true}}},[_c('span',{staticClass:\"ec-user__btn__icon\"},[_c('i',{staticClass:\"fas fa-envelope\"})]),_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('email'))))+\" \")]):_c('div',{staticClass:\"ec-user__visitor-info\"},[_vm._v(\" \"+_vm._s(_vm.dictionary('visitor_checkout'))+\" \")])],2):_c('div',{key:\"form\"},[_c('form',{on:{\"submit\":_vm.emailLoginSubmit}},[_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn ec-user__back\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showLoginForm = false}}},[_c('i',{staticClass:\"fas fa-arrow-left\"})]),_c('label',{attrs:{\"for\":\"ec-user-email\"}},[_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('email'))))+\" \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],ref:\"input\",staticClass:\"form-control\",attrs:{\"type\":\"email\",\"id\":\"ec-user-email\",\"placeholder\":\"email@mail.com\",\"required\":\"\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('button',{staticClass:\"btn btn-block btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('login'))+\" \")])])])])],1)],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * @ecomplus/widget-user\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport Vue from 'vue'\nimport '@ecomplus/storefront-twbs'\nimport EcUser from './components/EcUser.vue'\n\nexport default (options = {}, elId = 'user-button') => {\n  const $userButton = document.getElementById(elId)\n\n  if ($userButton) {\n    new Vue({\n      render: h => h(EcUser, {\n        attrs: {\n          id: elId\n        },\n        props: {\n          ...options.props\n        }\n      })\n    }).$mount($userButton)\n  }\n}\n"],"sourceRoot":""}