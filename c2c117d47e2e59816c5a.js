(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{356:function(e,t,o){"use strict";o.r(t);o(13);var c=o(77),n=o(24),r=o(20),a=o(37);const s=n.$ecomConfig.get("currency")||"BRL",i=e=>{const t={name:Object(r.a)(e),id:e.sku,price:Object(a.a)(e).toFixed(2)};return e.quantity&&(t.quantity=e.quantity),t};var u=o(15);t.default=(e={})=>{const{dataLayerVar:t,parseDomMsDelay:o}=e,n=window[t]||window.dataLayer;n&&((e=>{const t=window.storefront&&window.storefront.context;if(t&&"products"===t.resource){const{body:o}=t,n=i(o),r={event:"eec.detail",ecommerce:{currencyCode:s,detail:{products:[n]}}},a=Object(c.a)(o);a.length&&(n.category=o.category_tree?o.category_tree.replace(/\s>\s/g,"/"):a[0],r.ecommerce.detail.actionField={list:a[0]}),o.brands&&o.brands.length&&(n.brand=o.brands[0].name),e.push(r)}})(n),(e=>{const t=window.storefrontApp&&window.storefrontApp.router;if(t){let o,c,n;const r=()=>{const e=[];return u.a.data&&Array.isArray(u.a.data.items)&&u.a.data.items.forEach((t=>{e.push(i(t))})),e},a=(t,n)=>{const a={step:t,option:n};t<=1||!o?(e.push({event:"eec.checkout",ecommerce:{currencyCode:s,checkout:{actionField:a,products:r()}}}),e.push({event:"checkout"}),o=!0):c||(e.push({event:"eec.checkout_option",ecommerce:{currencyCode:s,checkout_option:{actionField:a}}}),e.push({event:"checkoutOption"}),c=!0)},d=t=>{if(!n){const{amount:o}=window.storefrontApp,c={id:t,revenue:(o&&o.total||u.a.data&&u.a.data.subtotal||0).toFixed(2)};o&&(void 0!==o.freight&&(c.shipping=o.freight.toFixed(2)),void 0!==o.tax&&(c.tax=o.tax.toFixed(2))),e.push({event:"eec.purchase",ecommerce:{currencyCode:s,purchase:{actionField:c,products:r()}}}),n=!0}},p=({name:e,params:t})=>{switch(e){case"cart":a(1,"Review Cart");break;case"checkout":a(2,"Confirm Purchase");break;case"confirmation":d(t.id)}};t.currentRoute&&p(t.currentRoute),t.afterEach(p)}})(n),(e=>{const t={},o=o=>{const c=i(o);e.push({event:"eec.add",ecommerce:{currencyCode:s,add:{products:[c]}}}),e.push({event:"addToCart"}),t[o.sku]=c},c=o=>{const c=t[o.sku];e.push({event:"eec.remove",ecommerce:{currencyCode:s,remove:{products:[c?Object.assign({},c):i(o)]}}}),e.push({event:"removeFromCart"}),delete t[o.sku]};u.a.on("addItem",(({item:e})=>o(e))),u.a.on("increaseItemQnt",(({item:e})=>{const n=t[e.sku];if(n){const t=e.quantity-n.quantity;t>0?o({...e,quantity:t}):c({...e,quantity:-t})}else o(e)})),u.a.on("removeItem",(({item:e})=>c(e))),u.a.on("clear",(()=>{for(const e in t)t[e]&&c(t[e])}))})(n),setTimeout((()=>{(e=>{const t=document.querySelectorAll("[data-sku]");if(t.length){const o=[],c={},n="/search"===window.location.pathname;for(let e=0;e<t.length;e++){const r=t[e],{sku:a}=r.dataset;if(-1===o.indexOf(a)&&(o.push(a),r.closest)){const e=r.closest(".products-carousel");!n&&e&&(c[a]=e.dataset.title)}}e.push({event:"eec.impressions",ecommerce:{currencyCode:s,impressions:o.map((e=>{const t=n?"Search results":c[e],o={id:e};return t&&(o.list=t),o}))}})}})(n)}),o>=0?o:300))}}}]);
//# sourceMappingURL=c2c117d47e2e59816c5a.js.map