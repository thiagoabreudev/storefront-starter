{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-user/src/components/scss/EcUser.scss?0e05","webpack:///./node_modules/@ecomplus/widget-user/src/lib/dictionary.js","webpack:///./node_modules/@ecomplus/widget-user/src/components/js/EcUser.js?7012","webpack:///./node_modules/@ecomplus/widget-user/src/components/js/EcUser.js","webpack:///./node_modules/@ecomplus/widget-user/src/components/EcUser.vue","webpack:///./node_modules/@ecomplus/widget-user/src/components/html/EcUser.html","webpack:///./node_modules/@ecomplus/widget-user/src/index.js"],"names":["dictionary","my_account","en_us","pt_br","my_orders","hello","visitor","sign_in_with","sign_up_with","another","email","logout","login","continue_on_popup","login_error","profile_not_found","visitor_checkout","word","lang","this","name","props","type","String","default","$ecomConfig","get","ecomPassport","Object","popoverPlacement","getGreetingsMsg","Function","accountUrl","ordersUrl","popupAlertCountSecs","Number","data","showPopover","popoverTriggers","waiting","waitingPopup","isLogged","oauthProviders","showLoginForm","popupAlertCount","loginErrorAlert","noProfileFound","popoverHideTimer","computed","greetings","methods","update","fixPopoverTriggers","checkLogin","getCustomerName","setTimeout","clearTimeout","waitPromise","promise","vm","catch","err","console","error","finally","setOauthProviders","fetchOauthProviders","then","host","baseUri","oauthPath","providers","provider","faIcon","providerName","push","link","presetOauthProviders","oauthPopup","popupOauthLink","find","oauthProvider","popupAlertChanged","countDown","emailLoginSubmit","e","preventDefault","fetchLogin","response","status","resetErrors","resetPopover","mounted","forEach","ev","on","payload","$emit","watch","newStatus","$refs","input","focus","_vm","_h","$createElement","_c","_self","staticClass","_t","directives","rawName","modifiers","attrs","$event","slot","_v","_s","key","value","expression","ref","domProps","target","composing","_l","class","options","elId","$userButton","document","getElementById","Vue","render","h","EcUser","id","$mount"],"mappings":"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","file":"ff8e5a5155648ffe66ed.js","sourcesContent":["import mod from \"-!../../../../../mini-css-extract-plugin/dist/loader.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-3!./EcUser.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../mini-css-extract-plugin/dist/loader.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-3!./EcUser.scss?vue&type=style&index=0&lang=scss&\"","const dictionary = {\n  my_account: {\n    en_us: 'My account',\n    pt_br: 'Minha conta'\n  },\n  my_orders: {\n    en_us: 'My orders',\n    pt_br: 'Meus pedidos'\n  },\n  hello: {\n    en_us: 'Hello',\n    pt_br: 'Olá'\n  },\n  visitor: {\n    en_us: 'visitor',\n    pt_br: 'visitante'\n  },\n  sign_in_with: {\n    en_us: 'Sign in with',\n    pt_br: 'Entrar com'\n  },\n  sign_up_with: {\n    en_us: 'Sign up with',\n    pt_br: 'Cadastrar via'\n  },\n  another: {\n    en_us: 'another',\n    pt_br: 'outro'\n  },\n  email: {\n    en_us: 'email',\n    pt_br: 'e-mail'\n  },\n  logout: {\n    en_us: 'Logout',\n    pt_br: 'Sair'\n  },\n  login: {\n    en_us: 'Login',\n    pt_br: 'Entrar'\n  },\n  continue_on_popup: {\n    en_us: 'Continue login on popup',\n    pt_br: 'Continue o login no pop-up'\n  },\n  login_error: {\n    en_us: 'There was an error trying to login, please try again or select another option',\n    pt_br: 'Houve um erro ao tentar o login, por favor tente novamente ou selecione outra opção'\n  },\n  profile_not_found: {\n    en_us: 'No profile found with email address',\n    pt_br: 'Nenhum perfil encontrado com o endereço de e-mail'\n  },\n  visitor_checkout: {\n    en_us: 'You can also buy as a visitor if you prefer',\n    pt_br: 'Você também pode comprar como visitante se preferir'\n  }\n}\n\nexport default function (word, lang) {\n  if (!lang) {\n    lang = (this && this.lang) || 'en_us'\n  }\n  return (dictionary[word] && dictionary[word][lang]) || ''\n}\n","import mod from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcUser.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcUser.js?vue&type=script&lang=js&\"","import { $ecomConfig } from '@ecomplus/utils'\nimport dictionary from './../../lib/dictionary'\nimport ecomPassport from '@ecomplus/passport-client'\n\nexport default {\n  name: 'EcUser',\n\n  props: {\n    lang: {\n      type: String,\n      default: $ecomConfig.get('lang')\n    },\n    ecomPassport: {\n      type: Object,\n      default: () => ecomPassport\n    },\n    popoverPlacement: {\n      type: String,\n      default: 'bottomleft'\n    },\n    getGreetingsMsg: {\n      type: Function\n    },\n    accountUrl: {\n      type: String,\n      default: '/app/#/account/'\n    },\n    ordersUrl: {\n      type: String,\n      default: '/app/#/account/orders'\n    },\n    popupAlertCountSecs: {\n      type: Number,\n      default: 3\n    }\n  },\n\n  data () {\n    return {\n      showPopover: false,\n      popoverTriggers: 'click blur',\n      waiting: false,\n      waitingPopup: false,\n      isLogged: false,\n      email: '',\n      name: '',\n      oauthProviders: [],\n      showLoginForm: false,\n      popupAlertCount: 0,\n      loginErrorAlert: false,\n      noProfileFound: false,\n      popoverHideTimer: null\n    }\n  },\n\n  computed: {\n    greetings () {\n      if (typeof this.getGreetingsMsg === 'function') {\n        return this.getGreetingsMsg(this.name)\n      } else {\n        return `${dictionary('hello', this.lang)} ${this.name || dictionary('visitor', this.lang)}`\n      }\n    }\n  },\n\n  methods: {\n    dictionary,\n\n    update () {\n      this.fixPopoverTriggers()\n      const { checkLogin, getCustomerName } = this.ecomPassport\n      this.name = getCustomerName()\n      this.isLogged = checkLogin()\n      this.email = ''\n      this.popupAlertCount = 0\n      if (this.isLogged) {\n        this.showPopover = true\n        setTimeout(() => {\n          if (this.showPopover) {\n            this.popoverHideTimer = setTimeout(() => {\n              this.showPopover = false\n            }, 2000)\n          }\n        }, 200)\n      }\n      this.waitingPopup = false\n      clearTimeout(this.popoverHideTimer)\n    },\n\n    waitPromise (promise) {\n      this.fixPopoverTriggers()\n      const vm = this\n      vm.waiting = true\n      promise\n        .catch(err => {\n          console.error(err)\n        })\n        .finally(() => {\n          vm.waiting = false\n        })\n    },\n\n    setOauthProviders () {\n      const vm = this\n      const promise = vm.ecomPassport.fetchOauthProviders()\n        .then(({ host, baseUri, oauthPath, providers }) => {\n          const oauthProviders = []\n          for (const provider in providers) {\n            if (providers[provider]) {\n              const { faIcon, providerName } = providers[provider]\n              oauthProviders.push({\n                link: host + baseUri + provider + oauthPath,\n                faIcon,\n                provider,\n                providerName\n              })\n            }\n          }\n          vm.oauthProviders = oauthProviders\n        })\n        .catch(err => {\n          vm.presetOauthProviders()\n          throw err\n        })\n      vm.waitPromise(promise)\n      return promise\n    },\n\n    presetOauthProviders () {\n      this.oauthProviders = [\n        {\n          faIcon: 'fa-facebook-f',\n          providerName: 'Facebook',\n          provider: 'facebook'\n        },\n        {\n          faIcon: 'fa-google',\n          providerName: 'Google',\n          provider: 'google'\n        },\n        {\n          faIcon: 'fa-windows',\n          providerName: 'Windows',\n          provider: 'windowslive'\n        }\n      ]\n    },\n\n    oauthPopup (link, provider) {\n      const vm = this\n      this.loginErrorAlert = false\n      if (link) {\n        vm.ecomPassport.popupOauthLink(link)\n        vm.waitingPopup = true\n        setTimeout(() => {\n          vm.popupAlertCount = vm.popupAlertCountSecs\n        }, 200)\n      } else {\n        const promise = vm.setOauthProviders()\n          .then(() => {\n            const link = vm.oauthProviders\n              .find(oauthProvider => oauthProvider.provider === provider)\n            vm.oauthPopup(link, provider)\n          })\n          .catch(err => {\n            vm.loginErrorAlert = true\n            throw err\n          })\n        vm.waitPromise(promise)\n      }\n    },\n\n    popupAlertChanged (countDown) {\n      this.popupAlertCount = countDown\n    },\n\n    emailLoginSubmit (e) {\n      const vm = this\n      e.preventDefault()\n      vm.showLoginForm = false\n      const promise = vm.ecomPassport.fetchLogin(this.email)\n        .catch(err => {\n          const { response } = err\n          if (response && response.status === 403) {\n            vm.noProfileFound = true\n          } else {\n            setTimeout(() => {\n              vm.loginErrorAlert = true\n            }, 100)\n            throw err\n          }\n        })\n      vm.waitPromise(promise)\n    },\n\n    logout () {\n      this.ecomPassport.logout()\n    },\n\n    resetErrors () {\n      this.noProfileFound = this.loginErrorAlert = false\n    },\n\n    resetPopover () {\n      if (this.showLoginForm) {\n        this.showLoginForm = false\n      } else {\n        this.resetErrors()\n      }\n    },\n\n    fixPopoverTriggers () {\n      if (this.showPopover) {\n        this.popoverTriggers = 'manual'\n        setTimeout(() => {\n          this.popoverTriggers = 'click blur'\n        }, 310)\n      }\n    }\n  },\n\n  mounted () {\n    const vm = this\n    ;['login', 'logout'].forEach(ev => {\n      this.ecomPassport.on(ev, payload => {\n        vm.update()\n        vm.$emit(ev, payload)\n      })\n    })\n    vm.update()\n    vm.setOauthProviders()\n  },\n\n  watch: {\n    noProfileFound (newStatus) {\n      if (newStatus === false) {\n        this.email = ''\n      }\n      this.showLoginForm = !newStatus\n    },\n\n    showLoginForm (newStatus) {\n      this.loginErrorAlert = false\n      if (newStatus) {\n        this.fixPopoverTriggers()\n        setTimeout(() => {\n          if (this.$refs.input) {\n            this.$refs.input.focus()\n          }\n        }, 300)\n      }\n    },\n\n    showPopover () {\n      clearTimeout(this.popoverHideTimer)\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./html/EcUser.html?vue&type=template&id=ac2e5f94&lang=html&\"\nimport script from \"./js/EcUser.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcUser.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcUser.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ec-user\"},[_vm._t(\"button\",[_c('button',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.left\",modifiers:{\"hover\":true,\"left\":true}}],staticClass:\"btn btn-lg btn-light\",attrs:{\"type\":\"button\",\"id\":\"ec-user-popover\",\"title\":_vm.dictionary('my_account')}},[_c('i',{staticClass:\"fas fa-user\"})])]),_c('b-popover',{attrs:{\"target\":\"ec-user-popover\",\"triggers\":_vm.popoverTriggers,\"show\":_vm.showPopover,\"placement\":_vm.popoverPlacement},on:{\"update:show\":function($event){_vm.showPopover=$event},\"hidden\":_vm.resetPopover}},[_c('template',{slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.greetings)+\" \")]),_c('div',{staticClass:\"ec-user__popover\"},[_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":_vm.loginErrorAlert,\"fade\":\"\",\"variant\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('login_error'))+\". \")]),_c('transition-group',{attrs:{\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated position-absolute fadeOut faster\"}},[(_vm.waiting)?_c('div',{key:\"waiting\"},[_c('div',{staticClass:\"spinner-border m-3\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])]):(_vm.isLogged)?_c('div',{key:\"logged\"},[_c('div',{staticClass:\"list-group list-group-flush\"},[_c('a',{staticClass:\"list-group-item list-group-item-action\",attrs:{\"href\":_vm.ordersUrl}},[_vm._v(\" \"+_vm._s(_vm.dictionary('my_orders'))+\" \")]),_c('a',{staticClass:\"list-group-item list-group-item-action\",attrs:{\"href\":_vm.accountUrl}},[_vm._v(\" \"+_vm._s(_vm.dictionary('my_account'))+\" \")])]),_c('button',{staticClass:\"btn btn-block btn-danger ec-user__logout\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.logout}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_vm._v(\" \"+_vm._s(_vm.dictionary('logout'))+\" \")])]):(!_vm.showLoginForm)?_c('div',{key:\"oauth\"},[_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":!_vm.popupAlertCount && _vm.noProfileFound,\"fade\":\"\",\"variant\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('profile_not_found'))+\" \"),_c('b',[_vm._v(_vm._s(_vm.email))]),_vm._v(\". \"),_c('br'),_c('a',{staticClass:\"alert-link\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.noProfileFound = false}}},[_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('another')) + \" \" + (_vm.dictionary('email'))))+\" \")])]),_c('b-alert',{staticClass:\"ec-user__alert\",attrs:{\"show\":_vm.popupAlertCount,\"dismissible\":\"\",\"fade\":\"\",\"variant\":\"info\"},on:{\"dismissed\":function($event){_vm.popupAlertCount = 0},\"dismiss-count-down\":_vm.popupAlertChanged}},[_vm._v(\" \"+_vm._s(_vm.dictionary('continue_on_popup'))+\". \")]),_vm._l((_vm.oauthProviders),function(ref){\nvar link = ref.link;\nvar faIcon = ref.faIcon;\nvar providerName = ref.providerName;\nvar provider = ref.provider;\nreturn _c('button',{key:provider,staticClass:\"btn btn-block ec-user__btn\",class:(\"ec-user__btn--\" + provider),attrs:{\"type\":\"button\"},on:{\"click\":function () { return _vm.oauthPopup(link, provider); }}},[_c('span',{staticClass:\"ec-user__btn__icon\"},[_c('i',{staticClass:\"fab\",class:faIcon})]),_vm._v(\" \"+_vm._s(_vm.dictionary(_vm.noProfileFound ? 'sign_up_with' : 'sign_in_with'))+\" \"+_vm._s(providerName)+\" \")])}),(!_vm.noProfileFound)?_c('button',{key:\"email\",staticClass:\"btn btn-block btn-secondary ec-user__btn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showLoginForm = true}}},[_c('span',{staticClass:\"ec-user__btn__icon\"},[_c('i',{staticClass:\"fas fa-envelope\"})]),_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('email'))))+\" \")]):_c('div',{staticClass:\"ec-user__visitor-info\"},[_vm._v(\" \"+_vm._s(_vm.dictionary('visitor_checkout'))+\" \")])],2):_c('div',{key:\"form\"},[_c('form',{on:{\"submit\":_vm.emailLoginSubmit}},[_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn ec-user__back\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showLoginForm = false}}},[_c('i',{staticClass:\"fas fa-arrow-left\"})]),_c('label',{attrs:{\"for\":\"ec-user-email\"}},[_vm._v(\" \"+_vm._s(((_vm.dictionary('sign_in_with')) + \" \" + (_vm.dictionary('email'))))+\" \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],ref:\"input\",staticClass:\"form-control\",attrs:{\"type\":\"email\",\"id\":\"ec-user-email\",\"placeholder\":\"email@mail.com\",\"required\":\"\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('button',{staticClass:\"btn btn-block btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.dictionary('login'))+\" \")])])])])],1)],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * @ecomplus/widget-user\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport Vue from 'vue'\nimport '@ecomplus/storefront-twbs'\nimport EcUser from './components/EcUser.vue'\n\nexport default (options = {}, elId = 'user-button') => {\n  const $userButton = document.getElementById(elId)\n\n  if ($userButton) {\n    new Vue({\n      render: h => h(EcUser, {\n        attrs: {\n          id: elId\n        },\n        props: {\n          ...options.props\n        }\n      })\n    }).$mount($userButton)\n  }\n}\n"],"sourceRoot":""}