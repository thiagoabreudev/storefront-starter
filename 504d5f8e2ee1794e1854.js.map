{"version":3,"sources":["webpack:///./node_modules/@ecomplus/storefront-app/src/components/scss/EcOrder.scss?da26","webpack:///./node_modules/@ecomplus/storefront-app/src/components/scss/EcOrder.scss?09e3","webpack:///./node_modules/@ecomplus/storefront-app/src/components/scss/EcOrder.scss","webpack:///./node_modules/@ecomplus/storefront-app/src/views/Order.vue?6361","webpack:///./node_modules/@ecomplus/storefront-app/src/components/js/EcOrder.js","webpack:///./node_modules/@ecomplus/storefront-app/src/components/js/EcOrder.js?1688","webpack:///./node_modules/@ecomplus/storefront-app/src/views/js/Order.js","webpack:///./node_modules/@ecomplus/storefront-app/src/views/js/Order.js?b3fa","webpack:///./node_modules/@ecomplus/storefront-app/src/components/EcOrder.vue","webpack:///./node_modules/@ecomplus/storefront-app/src/components/html/EcOrder.html","webpack:///./node_modules/@ecomplus/storefront-app/src/views/Order.vue"],"names":["content","module","i","locals","exports","add","default","___CSS_LOADER_API_IMPORT___","push","name","components","EcOrderInfo","props","order","type","Object","required","skipDataLoad","Boolean","accountOrdersUrl","String","ecomPassport","data","isReady","this","orderBody","_id","computed","localOrder","get","set","body","$emit","methods","fetchOrder","url","checkLogin","requestApi","store","then","watch","created","number","fetchOrdersList","orders","find","EcOrder","_vm","_h","$createElement","_c","_self","staticClass","attrs","key","on","$event","_v","mapGetters","numberStr","$route","params","test","parseInt","id"],"mappings":"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","file":"504d5f8e2ee1794e1854.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcOrder.scss?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6970cbc6\", content, true, {});","import mod from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcOrder.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../vue-style-loader/index.js!../../../../../css-loader/dist/cjs.js!../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../postcss-loader/src/index.js??postcss!../../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-3!./EcOrder.scss?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ec-order{min-height:300px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"order\"}},[_c('ec-order',{attrs:{\"order\":_vm.order}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { store } from '@ecomplus/client'\nimport ecomPassport from '@ecomplus/passport-client'\nimport EcOrderInfo from './../EcOrderInfo.vue'\n\nexport default {\n  name: 'EcOrder',\n\n  components: {\n    EcOrderInfo\n  },\n\n  props: {\n    order: {\n      type: Object,\n      required: true\n    },\n    skipDataLoad: {\n      type: Boolean\n    },\n    accountOrdersUrl: {\n      type: String,\n      default: '/app/#/account/orders'\n    },\n    ecomPassport: {\n      type: Object,\n      default: () => ecomPassport\n    }\n  },\n\n  data () {\n    return {\n      isReady: this.skipDataLoad,\n      orderBody: {\n        _id: '',\n        ...this.order\n      }\n    }\n  },\n\n  computed: {\n    localOrder: {\n      get () {\n        return this.orderBody\n      },\n      set (body) {\n        this.orderBody = body\n        this.$emit('update:order', body)\n      }\n    }\n  },\n\n  methods: {\n    fetchOrder () {\n      const url = `/orders/${this.orderBody._id}.json`\n      const request = this.ecomPassport.checkLogin()\n        ? this.ecomPassport.requestApi(url)\n        : store({ url })\n      request.then(({ data }) => {\n        this.localOrder = data\n        this.isReady = true\n      })\n    }\n  },\n\n  watch: {\n    'order._id' (_id) {\n      if (_id && _id !== this.orderBody._id) {\n        this.orderBody = this.order\n      }\n    },\n\n    'orderBody._id' (_id) {\n      if (_id && !this.skipDataLoad) {\n        this.fetchOrder()\n      }\n    }\n  },\n\n  created () {\n    if (!this.skipDataLoad) {\n      if (this.order._id) {\n        this.fetchOrder()\n      } else if (this.order.number) {\n        this.ecomPassport.fetchOrdersList().then(orders => {\n          this.localOrder = orders.find(({ number }) => number === this.order.number) || {}\n        })\n      } else {\n        // TODO: alert invalid order body\n      }\n    }\n  }\n}\n","import mod from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcOrder.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../babel-loader/lib/index.js??ref--1!./EcOrder.js?vue&type=script&lang=js&\"","import { mapGetters } from 'vuex'\nimport EcOrder from './../../components/EcOrder.vue'\n\nexport default {\n  name: 'order',\n\n  components: {\n    EcOrder\n  },\n\n  computed: {\n    ...mapGetters([\n      'orders'\n    ]),\n\n    number () {\n      const numberStr = this.$route.params.number\n      return /^[0-9]+$/.test(numberStr) && parseInt(numberStr, 10)\n    },\n\n    order () {\n      const order = this.orders.find(({ _id, number }) => {\n        return this.number === number || this.$route.params.number === _id\n      })\n      if (!order) {\n        const { number } = this\n        if (number) {\n          return {\n            _id: this.$route.params.id,\n            number\n          }\n        } else {\n          return { _id: this.$route.params.number }\n        }\n      }\n      return order\n    }\n  }\n}\n","import mod from \"-!../../../../../babel-loader/lib/index.js??ref--1!./Order.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../babel-loader/lib/index.js??ref--1!./Order.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./html/EcOrder.html?vue&type=template&id=16978838&lang=html&\"\nimport script from \"./js/EcOrder.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcOrder.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcOrder.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"ec-order\"},[_c('transition-group',{attrs:{\"enter-active-class\":\"animated fadeIn slow\"}},[(_vm.isReady)?_c('ec-order-info',{key:\"info\",attrs:{\"order\":_vm.localOrder,\"skip-first-data-load\":\"\"},on:{\"update:order\":function($event){_vm.localOrder=$event}}}):_c('div',{key:\"loading\"},[_c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=314539a0&\"\nimport script from \"./js/Order.js?vue&type=script&lang=js&\"\nexport * from \"./js/Order.js?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}